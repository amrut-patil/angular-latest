<mat-toolbar color="primary">
    <span>Category</span>
</mat-toolbar>
<form [formGroup]="categoryForm" (ngSubmit)="onSave()">
    <div class="fields-container">
        <mat-form-field floatLabel="always">
            <mat-label>Category</mat-label>
            <input formControlName="name" matInput required>
        </mat-form-field>

        <mat-form-field floatLabel="always">
            <mat-label>Parent</mat-label>
            <input type="text" matInput formControlName="parent" [matAutocomplete]="auto">
        </mat-form-field>
        <!-- <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let option of parents" [value]="option">{{option}}</mat-option>
        </mat-autocomplete> -->
        <mat-autocomplete #auto="matAutocomplete" >
            <mat-option *ngIf="isLoading" class="is-loading"><mat-spinner diameter="50"></mat-spinner></mat-option>
            <mat-option *ngFor="let category of (filteredCategories | async)" [value]="category.name">
              <span>{{ category.name }}</span>
              <small> | {{category.parent}}</small>
            </mat-option>
          </mat-autocomplete>

    </div>
    <div style="display: flex">
        <button type="button" class="new-button" (click)="newCategory()" mat-raised-button>New</button>
        <button type="submit" class="save-button" color="primary" [disabled]="categoryForm.invalid"
            mat-raised-button>Save</button>
    </div>
</form>